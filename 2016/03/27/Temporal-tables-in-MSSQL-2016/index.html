
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>jakubjares.com</title>
    <link href="https://fonts.googleapis.com/css?family=Fira+Mono|Lato:100,300,400,700,900,900i|Roboto" rel="stylesheet">

    
<link rel="stylesheet" href="/scss/styles.css">

    
<link rel="stylesheet" href="/scss/highlight.css">

    
<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-111716940-1', 'auto');
	ga('send', 'pageview');
</script>

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
    <header class="article-header">
    <div class="main-page-header-filler"></div>
    <div class="menu">
        <a href="/">
            <div>
                <svg viewBox="76 -3 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <path d="M80.5814303,71.6096505 C75.6649156,71.5033353 83.1767812,0.439369496 89.9186348,0.439368205 C97.914984,0.439366673 116.442438,74.9999972 125.727143,75 C135.011849,75.0000028 147.86947,0.507256695 151.30356,0.507256695 C154.73765,0.507256695 150.408807,74.9427912 142.667229,74.9427906 C134.925651,74.94279 120.545497,1.52077528e-08 106.655055,-7.10542736e-15 C94.9311609,-1.28357508e-08 85.497945,71.7159657 80.5814303,71.6096505 Z"
        id="Path-7" stroke="#FFFFFF" stroke-width="4" stroke-linecap="square" fill="none"></path>
</svg>
                <h1>Jakub<br />Jareš</h1>
            </div>
        </a>
        <nav>
            
            <a href="/">
                talks</a>
            
            <a href="/articles">
                articles</a>
            
            <a href="/about">
                about</a>
            
        </nav>
    </div>
    <div class="title">
        <h1>
            Temporal tables in MSSQL 2016
        </h1>
        <div>
            
            <a href="/tags/sql/">
                <p>sql</p>
            </a>
            
            <a href="/tags/entityframework/">
                <p>entityframework</p>
            </a>
            
        </div>
    </div>
</header>

<div class="article">

    <div class="article-content">
        <p>The new version of MS SQL server offers a lot of new cool features. One of them is called system-versioned temporal tables. </p>
<p>As the name suggests, this feature enables versioning for data in table, it does quite simply by creating a second table that holds the historic state of each row, as well as information about the timespan in which the row was valid. </p>
<span id="more"></span>

<p>For more information see <a href="https://msdn.microsoft.com/en-us/library/dn935015.aspx">this great overview on MSDN</a>. </p>
<p>The sad truth is that there is no support for versioned tables in EF 6, and no sings of it being prepared. For EF Core, there is at least an <a href="https://github.com/aspnet/EntityFramework/issues/4693">issue marked as enhancement</a> so hopefully someone will jump on it and sooner or later we will be able to do: <code>_context.Orders.AsOf(1.Months().Ago().LastDayOfMonth())</code>.</p>
<p>The good thing is that, even though you can’t access the historic data through EF yet, you can use the versioning on the tables where EF stores your entities. This should be useful in systems where audits are not reviewed often, and so you can afford to query them through ad-hoc SQL, but still need to have the auditing in place. </p>
<p>Here is a <a href="http://www.pontop.dk/#!SQL-Server-2016-temporal-tables-7-Database-first-Entity-Framework-models-and-systemversioned-tables/whpr3/56732b230cf275ddd6e971a5">great article</a> on how to use versioning with EF.</p>

    </div>
    <div class="article-footer">
        <p>written at</p>
        <time datetime="">
            27 March 2016
        </time>
    </div>
</div>
<footer class="footer">
    <div class="footer-filler"></div>

    <a href="https://bsky.app/profile/jakubjares.com">bsky</a>&bull;
    <a href="https://twitter.com/nohwnd">twitter</a>&bull;
    <a href="https://github.com/nohwnd">github</a>&bull;
    <a href="https://linkedin.com/in/jares/">linkedin</a>
</footer>
</body>

</html>
